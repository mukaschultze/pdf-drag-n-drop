<section>
    <mat-toolbar color="primary" class="toolbar">

        <span>PDF Builder</span>
        <span class="fill-remaining-space"></span>

        <button (click)="log(this.pdfDefinition, 'pdfDefinition')" mat-icon-button matTooltip="Log Definition" *devMode>
            <mat-icon>bug_report</mat-icon>
        </button>

        <button (click)="log(this.pdfTemplate, 'pdfTemplate')" mat-icon-button matTooltip="Log Template" *devMode>
            <mat-icon>bug_report</mat-icon>
        </button>

        <button (click)="changeTheme()" mat-icon-button matTooltip="Change Theme">
            <mat-icon>{{(theme|async) === 'dark-theme' ? 'brightness_4' : 'brightness_5'}}</mat-icon>
        </button>

        <a mat-button href="https://github.com/mukaschultze/pdf-drag-n-drop" target="_blank">
            <img src="../assets/github-circle-white-transparent.svg" class="logo">
            GitHub
        </a>

    </mat-toolbar>
</section>

<div class="full-height row no-scroll">

    <!-- Left -->
    <section class="column scroll">

        <mat-button-toggle-group [value]="viewer|async" (change)="viewer.next($event.value)">
            <mat-button-toggle value="iframe">iframe</mat-button-toggle>
            <mat-button-toggle value="pdf-viewer">pdf-viewer</mat-button-toggle>
            <mat-button-toggle value="ng2-pdfjs-viewer">ng2-pdfjs-viewer</mat-button-toggle>
        </mat-button-toggle-group>

        <mat-list cdkDropList [cdkDropListData]="availableNodes" cdkDropListSortingDisabled *ngIf="true">
            <mat-list-item cdkDrag [cdkDragData]="node" *ngFor="let node of availableNodes">
                {{node.name}} ({{node.key}})
            </mat-list-item>
        </mat-list>

        <pdf-tree></pdf-tree>

        <div>
            <!-- <pre>{{docDefinition.build() | async | json}}</pre> -->
        </div>

    </section>

    <!-- Right -->
    <section class="column no-scroll" [ngSwitch]="viewer|async">

        <mat-progress-bar mode="indeterminate" *ngIf="pdfBuilding|async"></mat-progress-bar>

        <ng-container *ngSwitchCase="'iframe'">
            <iframe [src]="((pdfUrl|async)||'about:blank')|safe" width="100%" height="100%" fitContent></iframe>
        </ng-container>

        <ng-container *ngSwitchCase="'pdf-viewer'">
            <pdf-viewer [src]="pdfUrl|async" *ngIf="pdfUrl|async"></pdf-viewer>
        </ng-container>

        <ng-container *ngSwitchCase="'ng2-pdfjs-viewer'">
            <ng2-pdfjs-viewer [pdfSrc]="pdfBlob|async" *ngIf="pdfBlob|async"></ng2-pdfjs-viewer>
        </ng-container>

    </section>

</div>

<!-- <router-outlet></router-outlet> -->